(function(t){function e(e){for(var o,a,s=e[0],l=e[1],c=e[2],d=0,p=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(o=!1)}o&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},r={main:0},i=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;i.push(["e35a","chunk-vendors"]),n()})({"1c45":function(t,e,n){e=t.exports=n("24fb")(!1),e.push([t.i,".tag-input{cursor:default!important;background-color:#ecf5ff;display:inline-block;padding:0 3px;margin:0 3px;line-height:1.5;font-size:12px;color:#409eff;border-radius:4px;-webkit-box-sizing:border-box;box-sizing:border-box;border:0;outline:0}",""])},"1f5d":function(t,e,n){e=t.exports=n("24fb")(!1),e.push([t.i,".msg-tpl-ctor[data-v-3643b0d8]{width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:4px;margin-bottom:15px;overflow:hidden;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex}.msg-tpl-ctor .left[data-v-3643b0d8]{width:80%}.msg-tpl-ctor .right[data-v-3643b0d8]{width:18%;padding-left:15px}.msg-tpl-ctor-input[data-v-3643b0d8]{width:100%;min-height:100px;-webkit-box-sizing:border-box;box-sizing:border-box;padding:10px;border:1px solid #dcdfe6;line-height:1.5;word-break:break-word;-webkit-user-modify:read-write-plaintext-only!important}.msg-tpl-ctor-input[data-v-3643b0d8]:focus{outline:none}.msg-tpl-ctor-view[data-v-3643b0d8]{margin-top:15px;min-height:100px;line-height:1.5;word-break:break-word}.msg-tpl-ctor-tools[data-v-3643b0d8],.msg-tpl-ctor-view[data-v-3643b0d8]{width:100%;padding:10px}.msg-tpl-ctor-tools[data-v-3643b0d8],.msg-tpl-ctor-tools .btn[data-v-3643b0d8],.msg-tpl-ctor-view[data-v-3643b0d8]{-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid #dcdfe6}.msg-tpl-ctor-tools .btn[data-v-3643b0d8]{display:inline-block;line-height:1;white-space:nowrap;cursor:pointer;background:#fff;color:#606266;-webkit-appearance:none;text-align:center;outline:0;margin:5px;-webkit-transition:.1s;transition:.1s;font-weight:500;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;padding:9px 15px;font-size:12px;border-radius:3px}.msg-tpl-ctor-tools .btn[data-v-3643b0d8]:focus,.msg-tpl-ctor-tools .btn[data-v-3643b0d8]:hover{color:#409eff;border-color:#c6e2ff;background-color:#ecf5ff}.msg-tpl-ctor-tools .btn[data-v-3643b0d8]:active{color:#3a8ee6;border-color:#3a8ee6;outline:0}",""])},"3b65":function(t,e,n){var o=n("602d");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=n("499e").default;r("70b85e84",o,!0,{sourceMap:!1,shadowMode:!1})},"602d":function(t,e,n){e=t.exports=n("24fb")(!1),e.push([t.i,"#app{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}",""])},"636e":function(t,e,n){var o=n("1f5d");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=n("499e").default;r("41e46924",o,!0,{sourceMap:!1,shadowMode:!1})},b5fe:function(t,e,n){"use strict";var o=n("636e"),r=n.n(o);r.a},d678:function(t,e,n){"use strict";var o=n("3b65"),r=n.n(o);r.a},e187:function(t,e,n){"use strict";var o=n("fc23"),r=n.n(o);r.a},e35a:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("MessageTemplateCreator",{attrs:{"tag-list":t.tagList},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)},i=[],a=(n("b0c0"),n("2fa7")),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"msgTplCtor",staticClass:"msg-tpl-ctor"},[n("div",{staticClass:"left"},[n("div",{ref:"msgTplCtorContent",staticClass:"msg-tpl-ctor-input",attrs:{id:t.contentId},on:{input:t.handleInput}}),n("div",{staticClass:"msg-tpl-ctor-view"},[t._v(" "+t._s(t.viewContent)+" ")])]),n("div",{staticClass:"right"},[n("div",{staticClass:"msg-tpl-ctor-tools"},t._l(t.tagList,(function(e){return n("button",{key:e,staticClass:"btn",on:{click:function(n){return t.addTag(e)}}},[t._v(t._s(e))])})),0)])])},l=[];n("0d03"),n("d3b7"),n("ac1f"),n("25f0"),n("5319");function c(t){return t.replace(/\<input([^\>]+)\>/g,(function(t){var e=document.createElement("div");return e.innerHTML=t,"[".concat(e.firstChild.value,"]")}))}function u(){return Math.random().toString(36).substr(2)}var d={name:"MessageTemplateCreator",props:{value:{type:String,default:""},tagList:{type:Array,default:function(){return[]}},tagInputCls:{type:String,default:""}},data:function(){return{currentText:this.value,contentId:"content".concat(u()),savedRange:{}}},computed:{viewContent:function(){return c(this.value)}},mounted:function(){this.currentText&&(this.$refs.msgTplCtorContent.innerHTML=this.currentText),document.addEventListener("selectionchange",this.handleSelect)},beforeDestroy:function(){document.removeEventListener("selectionchange",this.handleSelect)},methods:{addTag:function(t){var e=document.createElement("input");e.setAttribute("type","button"),e.setAttribute("class",this.tagInputCls?"tag-input ".concat(this.tagInputCls):"tag-input"),e.setAttribute("readonly",!0),e.setAttribute("value",t),this.insertNode(e)},insertNode:function(t){this.savedRange.deleteContents(),this.savedRange.insertNode(t);var e=this.$refs.msgTplCtorContent;this.updateData(e.innerHTML),this.currentText=e.innerText},updateData:function(t){this.$emit("input",t)},handleSelect:function(){var t=window.getSelection(),e=t.rangeCount>0?t.getRangeAt(0):null;e&&e.commonAncestorContainer.ownerDocument.activeElement.id===this.contentId&&(this.savedRange=e)},handleInput:function(t){this.updateData(t.target.innerHTML),this.currentText=t.target.innerText}}},p=d,f=(n("e187"),n("b5fe"),n("2877")),b=Object(f["a"])(p,s,l,!1,null,"3643b0d8",null),g=b.exports;g.install=function(t){t.component(g.name,g)};var v=g,h=function t(e){t.installed||(t.installed=!0,e.component(v.name,v))};"undefined"!==typeof window&&window.Vue&&h(window.Vue);var m=v,x={name:"app",components:Object(a["a"])({},m.MessageTemplateCreator.name,m.MessageTemplateCreator),data:function(){return{value:"这是一条信息模板",tagList:["button--one","button--two","button--three","button--four","button--five","button--six","button--seven"]}}},w=x,y=(n("d678"),Object(f["a"])(w,r,i,!1,null,null,null)),C=y.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(C)}}).$mount("#app")},fc23:function(t,e,n){var o=n("1c45");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=n("499e").default;r("e779f810",o,!0,{sourceMap:!1,shadowMode:!1})}});
//# sourceMappingURL=main.d60c4136.js.map